<%= simple_form_for @product, url: url, method: method do |f| %>
  <div class="form-inputs mb-10px form-cms row">
    <div class="form-cms-input col-xxl-3">
      <label>Product Name *</label>
      <%= f.input :name,
          required: true, label: false,
          input_html: { class: "form-control" } %>
    </div>
    <div class="form-cms-input col-xxl-3">
      <label>Price * (vnd)</label>
      <%= f.input :price,
        required: true, label: false,
        input_html: { class: "form-control", type: 'number' } %>
    </div>
    <div class="form-cms-input col-xxl-3">
      <label>Quantity *</label>
      <%= f.input :quantity,
        required: true, label: false,
        input_html: { class: "form-control", type: 'number' } %>
    </div>
    <div class="form-cms-input col-xxl-3 pr-0px">
      <label>City *</label>
      <%= f.input :city_id, as: :select, collection: (City.all).to_a,
          autofocus: true, label: false, include_blank: false,
          input_html: { class: "form-control"} %>
    </div>
  </div>
  <div class="form-inputs mb-10px form-cms row">
      <div class="form-cms-input col-xxl-6">
        <label>Short description *</label>
        <%= f.input :short_des,
          required: true, label: false,
          input_html: { class: "form-control", style: 'max-width: 100%' } %>
      </div>
      <div class="form-cms-input col-xxl-3">
        <label>Sale off * (%)</label>
        <%= f.input :sale_off,
          required: true, label: false,
          input_html: { class: "form-control", type: 'number' } %>
      </div>
  </div>
  <div class="row mb-50px">
    <div class="col-md-6">
      <label>Description *</label>
      <%= f.input :description, as: :text,
        required: true, label: false,
        autofocus: true,
        input_html: { class: "form-control", style: 'min-height: 232px' } %>
    </div>
    <div class="col-md-6">
      <label>Upload Images *</label>
      <%= image_tag("add-thumb-icon.png", class: 'blank_preview d-block', onclick: 'clickUpload()') %>
    </div>
  </div>
  <div class="d-none">
    <%= f.file_field :photo, multiple: true, name: "photos[photo][]", class: "upload-image" %>
  </div>
  <% if action_name == 'edit' %>
    <div class="photos">
      <% @photos.each do |p| %>
        <div class="photo position-relative">
          <%= image_tag p.photo_url, class: "w-100" %>
          <%= link_to admins_photo_path(p), class: 'position-absolute', method: :delete do %>
            <%= image_tag 'delete-preview-icon.png' %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
  <div id="preview"></div>
<div class="form-actions d-none">
  <%= f.button :submit, "Create", class: "", id: "button-submit" %>
</div>
<% end %>
<script>
  function clickUpload() {
    $('.upload-image').click()
  }
  $(".upload-image").on("change", function(){
    var preview = document.querySelector('#preview');
    var files   = document.querySelector('input[type=file]').files;

    function readAndPreview(file) {
      if ( /\.(jpe?g|png|gif)$/i.test(file.name) ) {
        var reader = new FileReader();

        reader.addEventListener("load", function () {
          var image = new Image();
          image.width = 200;
          image.title = file.name;
          image.src = this.result;
          image.style = 'padding-right: 10px'
          preview.appendChild( image );
        }, false);
        reader.readAsDataURL(file);
      }
    }

    if (files) {
      [].forEach.call(files, readAndPreview);
    }
  })
</script>